version: 0.2
# This is for flamigo uat site

env:
  parameter-store:
    UAT_URL: "FLAMINGO_UAT"

phases:
  install:
    runtime-versions:
      nodejs: 12
    commands:
      - yarn install        
  build:
    commands:
      - echo $UAT_URL
      - REACT_APP_ASYNC_WORK_API=$UAT_URL yarn build
      # use ${FLAMINGO_UAT} to replace https://api.uat.asyncworking.com/api/v1
      #- REACT_APP_ASYNC_WORK_API=https://api.uat.asyncworking.com/api/v1 yarn build
      
artifacts:
  base-directory: ./build
  files:
    - '**/*'
  name: AP-SOUTHEAST-2
cache:
  paths:
    - './node_modules/**/*'








# env: 
#   variables: 
#     PROJECT_NAME: "flamingo-uat"
#     PROJECT_OWNER: "John.Wu"


# phases:
#   install:
#     commands: 
#       - echo installing
#       - echo ${PROJECT_OWNER}
#       - pwd 
#       - ls -al      
#   build:
#     commands:
#       - echo Building...
#       - echo ${PROJECT_NAME}
#       - echo $AWS_REGION-$(date +%Y-%m-%d)
#       - pwd
#       - ls -al
# artifacts:
#   #base-directory: ./build
#   files:
#     - '**/*'
#   discard-paths: yes 
#   name: $AWS_REGION-$(date +%Y-%m-%d)
#   # secondary-artifacts:
#   #   artifact1:
#   #     files:
#   #       - 'public/*'
#   #     name: ${PROJECT_OWNER}-secondary-artifact-myname-$(date +%Y-%m-%d) 
#   #   artifact2:
#   #     files:
#   #       - './*.yml'
#   #     name: secondary-artifact-name-2
